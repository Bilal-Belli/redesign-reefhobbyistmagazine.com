<!DOCTYPE html>
<html>
<head>
  <title>Flipbook</title>
</head>
<body style="margin:0">
<iframe id="viewerFrame" style="width:100%;height:100vh;border:0"></iframe>

<script>
const id = location.pathname.split("/").pop();
fetch("/api/magazines")
  .then(r=>r.json())
  .then(list=>{
    const mag = list.find(m=>m.id===id);
    if(!mag){ alert("Flipbook not found"); return; }
    document.getElementById("viewerFrame").src = mag.embedUrl;
  });
</script>
</body>
</html>
